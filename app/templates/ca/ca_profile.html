{% extends 'ca/ca_base.html' %}
{% block title %}CA Profile | MyBillingApp{% endblock %}
{% block firm_name %} {{ firm_name }} {% endblock %}
{% block ca_content %}

<script src="https://unpkg.com/feather-icons"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>
  // Configure PDF.js worker
  if (typeof pdfjsLib !== 'undefined') {
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
  }
</script>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .fade-in-up {
    animation: fadeInUp 0.6s ease-out;
  }

  .slide-in-left {
    animation: slideInLeft 0.5s ease-out;
  }

  .fade-in {
    animation: fadeIn 0.4s ease-out;
  }

  .gradient-bg {
    background: linear-gradient(135deg, #eeeeee 0%, #eaecee 100%);
  }

  .document-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid #e2e8f0;
  }

  .document-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 25px -5px rgba(59, 130, 246, 0.1), 0 10px 10px -5px rgba(59, 130, 246, 0.04);
    border-color: #3b82f6;
  }

  .info-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .info-card:hover {
    transform: translateX(5px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .profile-edit-toggle {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .edit-form-container {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .file-preview {
    transition: all 0.3s ease;
  }

  .file-preview:hover {
    transform: scale(1.05);
  }
</style>

{% if not edit_mode %}
<!-- Hero Section - Profile View -->
<div class="fade-in-up gradient-bg rounded-3xl p-8 md:p-12 mb-8 text-white shadow-2xl">
  <div class="flex flex-col md:flex-row items-center space-y-6 md:space-y-0 md:space-x-8">
    <!-- Profile Image -->
    <div class="relative group">
      <div class="w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-white shadow-xl ring-8 ring-white/20 transform hover:scale-105 transition-all duration-300">
        {% if ca.photo_file %}
          <img src="{{ url_for('static', filename=ca.photo_file) }}" alt="Firm Photograph" 
               class="object-cover w-full h-full transform group-hover:scale-110 transition-all duration-500 ease-in-out" />
        {% else %}
          <div class="w-full h-full flex items-center justify-center bg-orange-200 backdrop-blur-sm">
            <i data-feather="user" class="w-12 h-12 text-orange-600"></i>
          </div>
        {% endif %}
      </div>
      <div class="absolute -bottom-2 -right-2 bg-emerald-500 w-8 h-8 rounded-full border-4 border-white flex items-center justify-center shadow-md">
        <i data-feather="check" class="w-4 h-4 text-white"></i>
      </div>
    </div>
    
    <!-- Profile Info -->
    <div class="flex-1 text-center md:text-left">
      <h1 class="text-3xl md:text-5xl font-bold mb-3 tracking-tight text-gray-600">{{ ca.firm_name }}</h1>
      <div class="flex items-center justify-center md:justify-start mb-4">
        <i data-feather="map-pin" class="w-5 h-5 mr-2 text-gray-600"></i>
        <p class="text-xl opacity-90 text-gray-600">{{ ca.area or 'Location not specified' }}</p>
      </div>
      
      <div class="flex flex-wrap justify-center md:justify-start gap-3 mb-6">
        {% if ca.domain_expertise %}
          {% set expertise_list = ca.domain_expertise|from_json %}
          {% set colors = [
            {'bg': 'bg-green-200', 'text': 'text-green-600'},
            {'bg': 'bg-purple-200', 'text': 'text-purple-600'},
            {'bg': 'bg-indigo-200', 'text': 'text-indigo-600'}
          ] %}
          {% for expertise in expertise_list[:3] %}
            <span class="{{ colors[loop.index0]['bg'] }} {{ colors[loop.index0]['text'] }} backdrop-blur-sm px-4 py-2 rounded-full text-sm font-medium border border-white/30 hover:bg-white/30 transition-colors duration-200">
              {% if expertise == 'taxation' %}Taxation
              {% elif expertise == 'audit' %}Audit & Assurance
              {% elif expertise == 'financial_planning' %}Financial Planning
              {% elif expertise == 'corporate_law' %}Corporate Law
              {% elif expertise == 'gst' %}GST Compliance
              {% elif expertise == 'income_tax' %}Income Tax
              {% elif expertise == 'company_formation' %}Company Formation
              {% elif expertise == 'accounting' %}Accounting Services
              {% elif expertise == 'compliance' %}Regulatory Compliance
              {% elif expertise == 'investment_advisory' %}Investment Advisory
              {% elif expertise == 'mergers_acquisitions' %}Mergers & Acquisitions
              {% elif expertise == 'forensic_accounting' %}Forensic Accounting
              {% else %}{{ expertise|title }}
              {% endif %}
            </span>
          {% endfor %}
        {% else %}
          <span class="bg-green-200 text-green-600 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-medium border border-white/30 hover:bg-white/30 transition-colors duration-200">
            Chartered Accountant
          </span>
          <span class="bg-purple-200 text-purple-600 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-medium border border-white/30 hover:bg-white/30 transition-colors duration-200">
            Tax Consultant
          </span>
          <span class="bg-indigo-200 text-indigo-600 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-medium border border-white/30 hover:bg-white/30 transition-colors duration-200">
            GST Expert
          </span>
        {% endif %}
      </div>

      {% if ca.about_me %}
        <p class="text-lg opacity-90 leading-relaxed max-w-2xl text-gray-700">{{ ca.about_me }}</p>
      {% else %}
        <p class="text-lg opacity-75 italic text-gray-700">Professional chartered accountant providing comprehensive financial services.</p>
      {% endif %}
    </div>
  </div>
</div>
{% else %}
<!-- Edit Mode Header -->
<div class="fade-in bg-slate-50 rounded-2xl p-6 mb-8 border border-slate-200">
  <div class="flex items-center justify-between">
    <div class="flex items-center space-x-4">
      <div class="p-3 bg-blue-200 rounded-xl shadow-lg">
        <i data-feather="edit-3" class="w-6 h-6 text-blue-600"></i>
      </div>
      <div>
        <h1 class="text-2xl lg:text-3xl font-bold text-gray-800">Edit Profile</h1>
        <p class="text-gray-600">Update your professional information and documents</p>
      </div>
    </div>
    <a href="?edit=0" 
       class="flex items-center space-x-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors duration-200 shadow-sm">
      <i data-feather="eye" class="w-4 h-4"></i>
      <span>View Profile</span>
    </a>
  </div>
</div>
{% endif %}

{% if not edit_mode %}
<!-- Professional Profile Section - Profile View -->
<div class="bg-white rounded-2xl p-8 shadow-xl border border-blue-100 fade-in-up mb-8">
  <div class="flex items-center mb-6">
    <div class="p-3 bg-blue-200 rounded-xl shadow-lg">
      <i data-feather="user" class="w-6 h-6 text-blue-700"></i>
    </div>
    <h2 class="text-2xl font-bold text-gray-800 ml-4">Professional Profile</h2>
  </div>
  
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- CA Personal Info -->
    <div class="space-y-4">
      <div class="info-card p-4 bg-blue-50 rounded-xl border-l-4 border-blue-600">
        <div class="flex items-center">
          <i data-feather="user" class="w-5 h-5 text-blue-600 mr-3"></i>
          <div>
            <p class="text-sm text-gray-700">CA Name</p>
            <p class="font-semibold text-blue-800">{{ ca.ca_name or 'Not provided' }}</p>
          </div>
        </div>
      </div>
      
      <div class="info-card p-4 bg-blue-50 rounded-xl border-l-4 border-blue-600">
        <div class="flex items-center">
          <i data-feather="mail" class="w-5 h-5 text-blue-600 mr-3"></i>
          <div>
            <p class="text-sm text-gray-700">Professional Email</p>
            <p class="font-semibold text-blue-800">{{ ca.ca_email_id or 'Not provided' }}</p>
          </div>
        </div>
      </div>
      
      <div class="info-card p-4 bg-blue-50 rounded-xl border-l-4 border-blue-600">
        <div class="flex items-center">
          <i data-feather="clock" class="w-5 h-5 text-blue-600 mr-3"></i>
          <div>
            <p class="text-sm text-gray-700">Experience</p>
            <p class="font-semibold text-blue-800">
              {% if ca.experience %}
                {% if ca.experience == 1 %}1-2 years
                {% elif ca.experience == 3 %}3-5 years
                {% elif ca.experience == 6 %}6-10 years
                {% elif ca.experience == 11 %}11-15 years
                {% elif ca.experience == 16 %}16-20 years
                {% elif ca.experience == 21 %}20+ years
                {% else %}{{ ca.experience }} years
                {% endif %}
              {% else %}Not specified{% endif %}
            </p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Domain Expertise & Industries -->
    <div class="space-y-4">
      <div class="info-card p-4 bg-blue-50 rounded-xl border-l-4 border-blue-600">
        <div class="flex items-start">
          <i data-feather="briefcase" class="w-5 h-5 text-blue-600 mr-3 mt-1"></i>
          <div class="flex-1">
            <p class="text-sm text-gray-700 mb-2">Domain Expertise</p>
            {% if ca.domain_expertise %}
              {% set expertise_list = ca.domain_expertise|from_json %}
              <div class="flex flex-wrap gap-2">
                {% for expertise in expertise_list %}
                  <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded-full text-xs font-medium">
                    {% if expertise == 'taxation' %}Taxation
                    {% elif expertise == 'audit' %}Audit & Assurance
                    {% elif expertise == 'financial_planning' %}Financial Planning
                    {% elif expertise == 'corporate_law' %}Corporate Law
                    {% elif expertise == 'gst' %}GST Compliance
                    {% elif expertise == 'income_tax' %}Income Tax
                    {% elif expertise == 'company_formation' %}Company Formation
                    {% elif expertise == 'accounting' %}Accounting Services
                    {% elif expertise == 'compliance' %}Regulatory Compliance
                    {% elif expertise == 'investment_advisory' %}Investment Advisory
                    {% elif expertise == 'mergers_acquisitions' %}Mergers & Acquisitions
                    {% elif expertise == 'forensic_accounting' %}Forensic Accounting
                    {% else %}{{ expertise|title }}
                    {% endif %}
                  </span>
                {% endfor %}
              </div>
            {% else %}
              <p class="font-semibold text-blue-800">Not specified</p>
            {% endif %}
          </div>
        </div>
      </div>
      
      <div class="info-card p-4 bg-blue-50 rounded-xl border-l-4 border-blue-600">
        <div class="flex items-start">
          <i data-feather="layers" class="w-5 h-5 text-blue-600 mr-3 mt-1"></i>
          <div class="flex-1">
            <p class="text-sm text-gray-700 mb-2">Industries Served</p>
            {% if ca.industries_served %}
              {% set industries_list = ca.industries_served|from_json %}
              <div class="flex flex-wrap gap-2">
                {% for industry in industries_list %}
                  <span class="bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full text-xs font-medium">
                    {% if industry == 'retail' %}Retail & E-commerce
                    {% elif industry == 'manufacturing' %}Manufacturing
                    {% elif industry == 'healthcare' %}Healthcare
                    {% elif industry == 'real_estate' %}Real Estate
                    {% elif industry == 'hospitality' %}Hospitality
                    {% elif industry == 'education' %}Education
                    {% elif industry == 'technology' %}Technology
                    {% elif industry == 'agriculture' %}Agriculture
                    {% elif industry == 'automotive' %}Automotive
                    {% elif industry == 'textiles' %}Textiles
                    {% elif industry == 'pharmaceuticals' %}Pharmaceuticals
                    {% elif industry == 'food_beverage' %}Food & Beverage
                    {% elif industry == 'construction' %}Construction
                    {% elif industry == 'logistics' %}Logistics & Transportation
                    {% elif industry == 'financial_services' %}Financial Services
                    {% elif industry == 'startups' %}Startups & SMEs
                    {% else %}{{ industry|title }}
                    {% endif %}
                  </span>
                {% endfor %}
              </div>
            {% else %}
              <p class="font-semibold text-blue-800">Not specified</p>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Contact Information Grid - Profile View -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
  <!-- Contact Details -->
  <div class="bg-white rounded-2xl p-8 shadow-xl border border-green-100 fade-in-up">
    <div class="flex items-center mb-6">
      <div class="p-3 bg-green-200 rounded-xl shadow-lg">
        <i data-feather="phone" class="w-6 h-6 text-green-600"></i>
      </div>
      <h2 class="text-2xl font-bold text-gray-700 ml-4">Contact Information</h2>
    </div>
    
    <div class="space-y-4">
      <div class="info-card p-4 bg-green-50 rounded-xl border-l-4 border-green-600">
        <div class="flex items-center">
          <i data-feather="phone" class="w-5 h-5 text-green-600 mr-3"></i>
          <div>
            <p class="text-sm text-gray-700">Phone Number</p>
            <p class="font-semibold text-green-800">{{ ca.contact_number or 'Not provided' }}</p>
          </div>
        </div>
      </div>

      <div class="info-card p-4 bg-green-50 rounded-xl border-l-4 border-green-600">
        <div class="flex items-center">
          <i data-feather="map-pin" class="w-5 h-5 text-green-600 mr-3"></i>
          <div>
            <p class="text-sm text-gray-700">Address</p>
            <p class="font-semibold text-green-800">{{ ca.address or 'Address not provided' }}</p>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div class="info-card p-4 bg-green-50 rounded-xl border-l-4 border-green-600">
          <div class="flex items-center mb-1">
            <i data-feather="home" class="w-4 h-4 text-green-600 mr-2"></i>
            <p class="text-sm text-gray-700">City</p>
          </div>
          <p class="font-semibold text-green-800">{{ ca.city or 'N/A' }}</p>
        </div>
        <div class="info-card p-4 bg-green-50 rounded-xl border-l-4 border-green-600">
          <div class="flex items-center mb-1">
            <i data-feather="map" class="w-4 h-4 text-green-600 mr-2"></i>
            <p class="text-sm text-gray-700">State</p>
          </div>
          <p class="font-semibold text-green-800">{{ ca.state or 'N/A' }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Professional Details -->
  <div class="bg-white rounded-2xl p-8 shadow-xl border border-purple-100 fade-in-up">
    <div class="flex items-center mb-6">
      <div class="p-3 bg-purple-200 rounded-xl shadow-lg">
        <i data-feather="briefcase" class="w-6 h-6 text-purple-700"></i>
      </div>
      <h2 class="text-2xl font-bold text-gray-800 ml-4">Professional Details</h2>
    </div>
    
    <div class="space-y-4">
      <div class="info-card p-4 bg-purple-50 rounded-xl border-l-4 border-purple-600">
        <div class="flex items-center">
          <i data-feather="hash" class="w-5 h-5 text-purple-600 mr-3"></i>
          <div>
            <p class="text-sm text-gray-700">GST Number</p>
            <p class="font-semibold text-purple-800">{{ ca.gst_number or 'Not provided' }}</p>
          </div>
        </div>
      </div>

      <div class="info-card p-4 bg-purple-50 rounded-xl border-l-4 border-purple-600">
        <div class="flex items-center">
          <i data-feather="credit-card" class="w-5 h-5 text-purple-600 mr-3"></i>
          <div>
            <p class="text-sm text-gray-700">PAN Number</p>
            <p class="font-semibold text-purple-800">{{ ca.pan_number or 'Not provided' }}</p>
          </div>
        </div>
      </div>

      

      <div class="info-card p-4 bg-purple-50 rounded-xl border-l-4 border-purple-600">
        <div class="flex items-center">
          <i data-feather="navigation" class="w-5 h-5 text-purple-600 mr-3"></i>
          <div>
            <p class="text-sm text-gray-700">Pincode</p>
            <p class="font-semibold text-purple-800">{{ ca.pincode or 'Not provided' }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}

{% if not edit_mode %}
<!-- Documents Section - Profile View -->
<div class="bg-white rounded-2xl p-8 shadow-xl border border-indigo-100 fade-in-up mb-8">
  <div class="flex items-center mb-8">
    <div class="p-3 bg-indigo-200 rounded-xl shadow-lg">
      <i data-feather="folder" class="w-6 h-6 text-indigo-700"></i>
    </div>
    <h2 class="text-2xl font-bold text-gray-800 ml-4">Professional Documents</h2>
  </div>
  
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Aadhaar Card -->
    <div class="document-card p-6 bg-gray-50 rounded-xl">
      <div class="flex items-center mb-4">
        <div class="p-2 bg-amber-100 rounded-lg">
          <i data-feather="credit-card" class="w-5 h-5 text-amber-600"></i>
        </div>
        <h3 class="font-semibold text-gray-800 ml-3">Aadhaar Card</h3>
      </div>
      <div class="text-center">
        {% if ca.aadhaar_file %}
          <a href="{{ url_for('static', filename=ca.aadhaar_file) }}" target="_blank" 
             class="block cursor-pointer group" id="aadhaar_preview_link">
            <div class="document-preview-container mb-3" id="aadhaar_preview_container">
              <div class="w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center group-hover:border-amber-400 transition-colors">
                <div class="text-center">
                  <i data-feather="file" class="w-8 h-8 text-gray-400 mx-auto mb-1"></i>
                  <p class="text-xs text-gray-500">Loading preview...</p>
                </div>
              </div>
            </div>
            <p class="inline-flex items-center px-4 py-2 text-orange-600 rounded-2xl text-md">
              <i data-feather="eye" class="w-4 h-4 mr-2"></i>
              View
            </p>
          </a>
        {% else %}
          <div class="flex flex-col items-center py-8">
            <i data-feather="file" class="w-12 h-12 text-gray-300 mb-2"></i>
            <span class="text-gray-500 text-sm">Not uploaded</span>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- PAN Card -->
    <div class="document-card p-6 bg-gray-50 rounded-xl">
      <div class="flex items-center mb-4">
        <div class="p-2 bg-blue-100 rounded-lg">
          <i data-feather="credit-card" class="w-5 h-5 text-blue-600"></i>
        </div>
        <h3 class="font-semibold text-gray-800 ml-3">PAN Card</h3>
      </div>
      <div class="text-center">
        {% if ca.pan_file %}
          <a href="{{ url_for('static', filename=ca.pan_file) }}" target="_blank" 
             class="block cursor-pointer group" id="pan_file_preview_link">
            <div class="document-preview-container mb-3" id="pan_file_preview_container">
              <div class="w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center group-hover:border-blue-400 transition-colors">
                <div class="text-center">
                  <i data-feather="file" class="w-8 h-8 text-gray-400 mx-auto mb-1"></i>
                  <p class="text-xs text-gray-500">Loading preview...</p>
                </div>
              </div>
            </div>
            <p class="inline-flex items-center px-4 py-2 text-orange-600 rounded-2xl text-md">
              <i data-feather="eye" class="w-4 h-4 mr-2"></i>
              View
            </p>
          </a>
        {% else %}
          <div class="flex flex-col items-center py-8">
            <i data-feather="file" class="w-12 h-12 text-gray-300 mb-2"></i>
            <span class="text-gray-500 text-sm">Not uploaded</span>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- ICAI Membership -->
    <div class="document-card p-6 bg-gray-50 rounded-xl">
      <div class="flex items-center mb-4">
        <div class="p-2 bg-indigo-100 rounded-lg">
          <i data-feather="award" class="w-5 h-5 text-indigo-600"></i>
        </div>
        <h3 class="font-semibold text-gray-800 ml-3">ICAI Certificate</h3>
      </div>
      <div class="text-center">
        {% if ca.icai_certificate_file %}
          <a href="{{ url_for('static', filename=ca.icai_certificate_file) }}" target="_blank" 
             class="block cursor-pointer group" id="icai_certificate_file_preview_link">
            <div class="document-preview-container mb-3" id="icai_certificate_file_preview_container">
              <div class="w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center group-hover:border-indigo-400 transition-colors">
                <div class="text-center">
                  <i data-feather="file" class="w-8 h-8 text-gray-400 mx-auto mb-1"></i>
                  <p class="text-xs text-gray-500">Loading preview...</p>
                </div>
              </div>
            </div>
            <p class="inline-flex items-center px-4 py-2 text-orange-600 rounded-2xl text-md">
              <i data-feather="eye" class="w-4 h-4 mr-2"></i>
              View
            </p>
          </a>
        {% else %}
          <div class="flex flex-col items-center py-8">
            <i data-feather="file" class="w-12 h-12 text-gray-300 mb-2"></i>
            <span class="text-gray-500 text-sm">Not uploaded</span>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- Certificate of Practice -->
    <div class="document-card p-6 bg-gray-50 rounded-xl">
      <div class="flex items-center mb-4">
        <div class="p-2 bg-emerald-100 rounded-lg">
          <i data-feather="shield" class="w-5 h-5 text-emerald-600"></i>
        </div>
        <h3 class="font-semibold text-gray-800 ml-3">COP Certificate</h3>
      </div>
      <div class="text-center">
        {% if ca.cop_certificate_file %}
          <a href="{{ url_for('static', filename=ca.cop_certificate_file) }}" target="_blank" 
             class="block cursor-pointer group" id="cop_certificate_file_preview_link">
            <div class="document-preview-container mb-3" id="cop_certificate_file_preview_container">
              <div class="w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center group-hover:border-emerald-400 transition-colors">
                <div class="text-center">
                  <i data-feather="file" class="w-8 h-8 text-gray-400 mx-auto mb-1"></i>
                  <p class="text-xs text-gray-500">Loading preview...</p>
                </div>
              </div>
            </div>
            <p class="inline-flex items-center px-4 py-2 text-orange-600 rounded-2xl text-md">
              <i data-feather="eye" class="w-4 h-4 mr-2"></i>
              View
            </p>
          </a>
        {% else %}
          <div class="flex flex-col items-center py-8">
            <i data-feather="file" class="w-12 h-12 text-gray-300 mb-2"></i>
            <span class="text-gray-500 text-sm">Not uploaded</span>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- Business Registration -->
    <div class="document-card p-6 bg-gray-50 rounded-xl">
      <div class="flex items-center mb-4">
        <div class="p-2 bg-purple-100 rounded-lg">
          <i data-feather="briefcase" class="w-5 h-5 text-purple-600"></i>
        </div>
        <h3 class="font-semibold text-gray-800 ml-3">Business Registration</h3>
      </div>
      <div class="text-center">
        {% if ca.business_reg_file %}
          <a href="{{ url_for('static', filename=ca.business_reg_file) }}" target="_blank" 
             class="block cursor-pointer group" id="business_reg_file_preview_link">
            <div class="document-preview-container mb-3" id="business_reg_file_preview_container">
              <div class="w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center group-hover:border-purple-400 transition-colors">
                <div class="text-center">
                  <i data-feather="file" class="w-8 h-8 text-gray-400 mx-auto mb-1"></i>
                  <p class="text-xs text-gray-500">Loading preview...</p>
                </div>
              </div>
            </div>
            <p class="inline-flex items-center px-4 py-2 text-orange-600 rounded-2xl text-md">
              <i data-feather="eye" class="w-4 h-4 mr-2"></i>
              View
            </p>
          </a>
        {% else %}
          <div class="flex flex-col items-center py-8">
            <i data-feather="file" class="w-12 h-12 text-gray-300 mb-2"></i>
            <span class="text-gray-500 text-sm">Not uploaded</span>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- Bank Details -->
    <div class="document-card p-6 bg-gray-50 rounded-xl">
      <div class="flex items-center mb-4">
        <div class="p-2 bg-rose-100 rounded-lg">
          <i data-feather="dollar-sign" class="w-5 h-5 text-rose-600"></i>
        </div>
        <h3 class="font-semibold text-gray-800 ml-3">Bank Details</h3>
      </div>
      <div class="text-center">
        {% if ca.bank_details_file %}
          <a href="{{ url_for('static', filename=ca.bank_details_file) }}" target="_blank" 
             class="block cursor-pointer group" id="bank_details_file_preview_link">
            <div class="document-preview-container mb-3" id="bank_details_file_preview_container">
              <div class="w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center group-hover:border-rose-400 transition-colors">
                <div class="text-center">
                  <i data-feather="file" class="w-8 h-8 text-gray-400 mx-auto mb-1"></i>
                  <p class="text-xs text-gray-500">Loading preview...</p>
                </div>
              </div>
            </div>
            <p class="inline-flex items-center px-4 py-2 text-orange-600 rounded-2xl text-md">
              <i data-feather="eye" class="w-4 h-4 mr-2"></i>
              View
            </p>
          </a>
        {% else %}
          <div class="flex flex-col items-center py-8">
            <i data-feather="file" class="w-12 h-12 text-gray-300 mb-2"></i>
            <span class="text-gray-500 text-sm">Not uploaded</span>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endif %}

{% if not edit_mode %}
<!-- Action Button -->
<div class="text-center mb-8">
  <a href="?edit=1" 
     class="inline-flex items-center px-8 py-4 bg-orange-200 text-orange-600 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 text-lg font-medium hover:from-blue-700 hover:to-blue-800">
    <i data-feather="edit-3" class="w-5 h-5 mr-2"></i>
    Edit Profile
  </a>
</div>
{% endif %}

{% if edit_mode %}
<div class="edit-form-container fade-in">
  <!-- Form Header -->
  <div class="bg-white rounded-2xl shadow-lg p-6 mb-6 border border-gray-200">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-2xl font-bold text-gray-800">Profile Information</h2>
      <div class="flex items-center space-x-2 text-sm text-gray-600">
        <i data-feather="info" class="w-4 h-4"></i>
        <span>Fill in your professional details</span>
      </div>
    </div>
  </div>

  <form method="post" enctype="multipart/form-data" class="space-y-8">
    {{ form.hidden_tag() }}
    
    <!-- Basic Information Section -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-emerald-200">
      <div class="flex items-center mb-6">
        <div class="p-2 bg-emerald-100 rounded-lg shadow-lg">
          <i data-feather="user" class="w-5 h-5 text-emerald-600"></i>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 ml-3">Basic Information</h3>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Firm Name -->
        <div class="space-y-2">
          {{ form.firm_name.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="briefcase" class="w-4 h-4 text-emerald-400"></i>
            </div>
            {{ form.firm_name(class_="w-full pl-10 pr-4 py-3 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition duration-200 bg-emerald-50 hover:bg-white", placeholder="Enter your firm name") }}
          </div>
          {% for error in form.firm_name.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>
        <!-- Contact Number -->
        <div class="space-y-2">
          {{ form.contact_number.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="phone" class="w-4 h-4 text-emerald-400"></i>
            </div>
            {{ form.contact_number(class_="w-full pl-10 pr-4 py-3 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition duration-200 bg-emerald-50 hover:bg-white", placeholder="Enter your contact number") }}
          </div>
          {% for error in form.contact_number.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>
      </div>
      
      <!-- About Me - Full Width -->
      <div class="space-y-2 mt-6">
        {{ form.about_me.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
        <div class="relative">
          <div class="absolute top-3 left-3 pointer-events-none">
            <i data-feather="edit-2" class="w-4 h-4 text-emerald-400"></i>
          </div>
          {{ form.about_me(class_="w-full pl-10 pr-4 py-3 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition duration-200 bg-emerald-50 hover:bg-white min-h-[120px] resize-vertical", placeholder="Tell us about your firm, expertise, and professional background...") }}
        </div>
        {% for error in form.about_me.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
      </div>
    </div>

    <!-- Professional Profile Section -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-blue-200">
      <div class="flex items-center mb-6">
        <div class="p-2 bg-blue-100 rounded-lg shadow-lg">
          <i data-feather="award" class="w-5 h-5 text-blue-600"></i>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 ml-3">Professional Profile</h3>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- CA Name -->
        <div class="space-y-2">
          {{ form.ca_name.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="user" class="w-4 h-4 text-blue-400"></i>
            </div>
            {{ form.ca_name(class_="w-full pl-10 pr-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 bg-blue-50 hover:bg-white", placeholder="Enter your full name") }}
          </div>
          {% for error in form.ca_name.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- Professional Email -->
        <div class="space-y-2">
          {{ form.ca_email_id.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="mail" class="w-4 h-4 text-blue-400"></i>
            </div>
            {{ form.ca_email_id(class_="w-full pl-10 pr-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 bg-blue-50 hover:bg-white", placeholder="your.email@example.com") }}
          </div>
          {% for error in form.ca_email_id.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- Experience -->
        <div class="space-y-2">
          {{ form.experience.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="clock" class="w-4 h-4 text-blue-400"></i>
            </div>
            {{ form.experience(class_="w-full pl-10 pr-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 bg-blue-50 hover:bg-white") }}
          </div>
          {% for error in form.experience.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>
      </div>
      
      <!-- Domain Expertise - Full Width -->
      <div class="space-y-2 mt-6">
        {{ form.domain_expertise.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
        <div class="relative">
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 p-4 border border-blue-300 rounded-lg bg-blue-50 hover:bg-white transition duration-200">
            {% for value, label in form.domain_expertise.choices %}
              <label class="flex items-center space-x-2 cursor-pointer hover:bg-blue-100 p-2 rounded-lg transition duration-200">
                <input type="checkbox" name="domain_expertise" value="{{ value }}" 
                       {% if form.domain_expertise.data and value in form.domain_expertise.data %}checked{% endif %}
                       class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2">
                <span class="text-sm text-gray-700">{{ label }}</span>
              </label>
            {% endfor %}
          </div>
        </div>
        {% for error in form.domain_expertise.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
      </div>
      
      <!-- Industries Served - Full Width -->
      <div class="space-y-2 mt-6">
        {{ form.industries_served.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
        <div class="relative">
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 p-4 border border-blue-300 rounded-lg bg-blue-50 hover:bg-white transition duration-200">
            {% for value, label in form.industries_served.choices %}
              <label class="flex items-center space-x-2 cursor-pointer hover:bg-blue-100 p-2 rounded-lg transition duration-200">
                <input type="checkbox" name="industries_served" value="{{ value }}" 
                       {% if form.industries_served.data and value in form.industries_served.data %}checked{% endif %}
                       class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2">
                <span class="text-sm text-gray-700">{{ label }}</span>
              </label>
            {% endfor %}
          </div>
        </div>
        {% for error in form.industries_served.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
      </div>
    </div>

    <!-- Location Information Section -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-cyan-200">
      <div class="flex items-center mb-6">
        <div class="p-2 bg-cyan-100 rounded-lg shadow-lg">
          <i data-feather="map-pin" class="w-5 h-5 text-cyan-600"></i>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 ml-3">Location Details</h3>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Area -->
        <div class="space-y-2">
          {{ form.area.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="navigation" class="w-4 h-4 text-cyan-400"></i>
            </div>
            {{ form.area(class_="w-full pl-10 pr-4 py-3 border border-cyan-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-cyan-50 hover:bg-white", placeholder="Enter area/locality") }}
          </div>
          {% for error in form.area.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- City -->
        <div class="space-y-2">
          {{ form.city.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="home" class="w-4 h-4 text-cyan-400"></i>
            </div>
            {{ form.city(class_="w-full pl-10 pr-4 py-3 border border-cyan-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-cyan-50 hover:bg-white", placeholder="Enter city") }}
          </div>
          {% for error in form.city.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- State -->
        <div class="space-y-2">
          {{ form.state.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="map" class="w-4 h-4 text-cyan-400"></i>
            </div>
            {{ form.state(class_="w-full pl-10 pr-4 py-3 border border-cyan-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-cyan-50 hover:bg-white", placeholder="Enter state") }}
          </div>
          {% for error in form.state.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- Pincode -->
        <div class="space-y-2">
          {{ form.pincode.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="hash" class="w-4 h-4 text-cyan-400"></i>
            </div>
            {{ form.pincode(class_="w-full pl-10 pr-4 py-3 border border-cyan-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-cyan-50 hover:bg-white", placeholder="Enter pincode") }}
          </div>
          {% for error in form.pincode.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>
      </div>

      <!-- Address - Full Width -->
      <div class="space-y-2 mt-6">
        {{ form.address.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
        <div class="relative">
          <div class="absolute top-3 left-3 pointer-events-none">
            <i data-feather="map-pin" class="w-4 h-4 text-cyan-400"></i>
          </div>
          {{ form.address(class_="w-full pl-10 pr-4 py-3 border border-cyan-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition duration-200 bg-cyan-50 hover:bg-white min-h-[80px] resize-vertical", placeholder="Enter your complete address...") }}
        </div>
        {% for error in form.address.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
      </div>
    </div>

    <!-- Professional Details Section -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-orange-200">
      <div class="flex items-center mb-6">
        <div class="p-2 bg-orange-100 rounded-lg shadow-lg">
          <i data-feather="file-text" class="w-5 h-5 text-orange-600"></i>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 ml-3">Professional Information</h3>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- GST Number -->
        <div class="space-y-2">
          {{ form.gst_number.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="hash" class="w-4 h-4 text-orange-400"></i>
            </div>
            {{ form.gst_number(class_="w-full pl-10 pr-4 py-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition duration-200 bg-orange-50 hover:bg-white", placeholder="Enter GST number") }}
          </div>
          {% for error in form.gst_number.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- PAN Number -->
        <div class="space-y-2">
          {{ form.pan_number.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i data-feather="credit-card" class="w-4 h-4 text-orange-400"></i>
            </div>
            {{ form.pan_number(class_="w-full pl-10 pr-4 py-3 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition duration-200 bg-orange-50 hover:bg-white", placeholder="Enter PAN number") }}
          </div>
          {% for error in form.pan_number.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- GSTIN -->
        
      </div>
    </div>
    <!-- Profile Images Section -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-violet-200">
      <div class="flex items-center mb-6">
        <div class="p-2 bg-violet-100 rounded-lg shadow-lg">
          <i data-feather="image" class="w-5 h-5 text-violet-600"></i>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 ml-3">Profile Images</h3>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Photo Upload -->
        <div class="space-y-4">
          {{ form.photo_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-gray-400 transition-colors duration-200" id="photo_file_container">
            <div class="upload-area" id="photo_file_upload_area">
              {% if ca.photo_file %}
                <div class="mb-4">
                  <img src="{{ url_for('static', filename=ca.photo_file) }}" alt="Current Photo" 
                       class="w-24 h-24 object-cover rounded-full mx-auto shadow-md">
                  <p class="text-sm text-emerald-600 mt-2 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-4 h-4 mr-1"></i>
                    Currently uploaded
                  </p>
                </div>
              {% else %}
                <div class="mb-4">
                  <i data-feather="camera" class="w-16 h-16 text-gray-400 mx-auto mb-2"></i>
                  <p class="text-gray-500">No photo uploaded</p>
                </div>
              {% endif %}
            </div>
            <div class="file-preview hidden" id="photo_file_preview">
              <div class="preview-content mb-4"></div>
              <p class="text-sm text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-4 h-4 mr-1"></i>
                File Preview
              </p>
            </div>
            {{ form.photo_file(class_="w-full text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-violet-100 file:text-violet-600 hover:file:bg-violet-200 transition duration-200") }}
          </div>
          {% for error in form.photo_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- Signature Upload -->
        <div class="space-y-4">
          {{ form.signature_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-violet-300 rounded-xl p-6 text-center hover:border-violet-400 transition-colors duration-200" id="signature_file_container">
            <div class="upload-area" id="signature_file_upload_area">
              {% if ca.signature_file %}
                <div class="mb-4">
                  <img src="{{ url_for('static', filename=ca.signature_file) }}" alt="Current Signature" 
                       class="w-32 h-16 object-contain mx-auto shadow-md rounded border">
                  <p class="text-sm text-emerald-600 mt-2 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-4 h-4 mr-1"></i>
                    Currently uploaded
                  </p>
                </div>
              {% else %}
                <div class="mb-4">
                  <i data-feather="edit-3" class="w-16 h-16 text-violet-400 mx-auto mb-2"></i>
                  <p class="text-violet-500">No signature uploaded</p>
                </div>
              {% endif %}
            </div>
            <div class="file-preview hidden" id="signature_file_preview">
              <div class="preview-content mb-4"></div>
              <p class="text-sm text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-4 h-4 mr-1"></i>
                File Preview
              </p>
            </div>
            {{ form.signature_file(class_="w-full text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-violet-100 file:text-violet-600 hover:file:bg-violet-200 transition duration-200") }}
          </div>
          {% for error in form.signature_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>
      </div>
    </div>

    <!-- Documents Upload Section -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-pink-200">
      <div class="flex items-center mb-6">
        <div class="p-2 bg-pink-100 rounded-lg shadow-lg">
          <i data-feather="folder" class="w-5 h-5 text-pink-600"></i>
        </div>
        <h3 class="text-xl font-semibold text-gray-800 ml-3">Document Uploads</h3>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Aadhaar File -->
        <div class="space-y-3">
          {{ form.aadhaar_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-gray-400 transition-colors duration-200 bg-amber-50/30" id="aadhaar_file_container">
            <div class="upload-area" id="aadhaar_file_upload_area">
              <div class="mb-3">
                <i data-feather="credit-card" class="w-8 h-8 text-amber-600 mx-auto mb-2"></i>
                {% if ca.aadhaar_file %}
                  <p class="text-xs text-emerald-600 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-3 h-3 mr-1"></i>
                    Uploaded
                  </p>
                {% else %}
                  <p class="text-xs text-gray-500">Not uploaded</p>
                {% endif %}
              </div>
            </div>
            <div class="file-preview hidden" id="aadhaar_file_preview">
              <div class="preview-content mb-3"></div>
              <p class="text-xs text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-3 h-3 mr-1"></i>
                Preview
              </p>
            </div>
            {{ form.aadhaar_file(class_="w-full text-xs file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-amber-100 file:text-amber-700 hover:file:bg-amber-200 transition duration-200") }}
          </div>
          {% for error in form.aadhaar_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- PAN File -->
        <div class="space-y-3">
          {{ form.pan_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-gray-400 transition-colors duration-200 bg-blue-50/30" id="pan_file_container">
            <div class="upload-area" id="pan_file_upload_area">
              <div class="mb-3">
                <i data-feather="credit-card" class="w-8 h-8 text-blue-600 mx-auto mb-2"></i>
                {% if ca.pan_file %}
                  <p class="text-xs text-emerald-600 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-3 h-3 mr-1"></i>
                    Uploaded
                  </p>
                {% else %}
                  <p class="text-xs text-gray-500">Not uploaded</p>
                {% endif %}
              </div>
            </div>
            <div class="file-preview hidden" id="pan_file_preview">
              <div class="preview-content mb-3"></div>
              <p class="text-xs text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-3 h-3 mr-1"></i>
                Preview
              </p>
            </div>
            {{ form.pan_file(class_="w-full text-xs file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 transition duration-200") }}
          </div>
          {% for error in form.pan_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- ICAI Certificate -->
        <div class="space-y-3">
          {{ form.icai_certificate_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-gray-400 transition-colors duration-200 bg-indigo-50/30" id="icai_certificate_file_container">
            <div class="upload-area" id="icai_certificate_file_upload_area">
              <div class="mb-3">
                <i data-feather="award" class="w-8 h-8 text-indigo-600 mx-auto mb-2"></i>
                {% if ca.icai_certificate_file %}
                  <p class="text-xs text-emerald-600 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-3 h-3 mr-1"></i>
                    Uploaded
                  </p>
                {% else %}
                  <p class="text-xs text-gray-500">Not uploaded</p>
                {% endif %}
              </div>
            </div>
            <div class="file-preview hidden" id="icai_certificate_file_preview">
              <div class="preview-content mb-3"></div>
              <p class="text-xs text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-3 h-3 mr-1"></i>
                Preview
              </p>
            </div>
            {{ form.icai_certificate_file(class_="w-full text-xs file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-indigo-100 file:text-indigo-700 hover:file:bg-indigo-200 transition duration-200") }}
          </div>
          {% for error in form.icai_certificate_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- COP Certificate -->
        <div class="space-y-3">
          {{ form.cop_certificate_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-gray-400 transition-colors duration-200 bg-emerald-50/30" id="cop_certificate_file_container">
            <div class="upload-area" id="cop_certificate_file_upload_area">
              <div class="mb-3">
                <i data-feather="shield" class="w-8 h-8 text-emerald-600 mx-auto mb-2"></i>
                {% if ca.cop_certificate_file %}
                  <p class="text-xs text-emerald-600 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-3 h-3 mr-1"></i>
                    Uploaded
                  </p>
                {% else %}
                  <p class="text-xs text-gray-500">Not uploaded</p>
                {% endif %}
              </div>
            </div>
            <div class="file-preview hidden" id="cop_certificate_file_preview">
              <div class="preview-content mb-3"></div>
              <p class="text-xs text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-3 h-3 mr-1"></i>
                Preview
              </p>
            </div>
            {{ form.cop_certificate_file(class_="w-full text-xs file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-emerald-100 file:text-emerald-700 hover:file:bg-emerald-200 transition duration-200") }}
          </div>
          {% for error in form.cop_certificate_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- Business Registration -->
        <div class="space-y-3">
          {{ form.business_reg_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-gray-400 transition-colors duration-200 bg-purple-50/30" id="business_reg_file_container">
            <div class="upload-area" id="business_reg_file_upload_area">
              <div class="mb-3">
                <i data-feather="briefcase" class="w-8 h-8 text-purple-600 mx-auto mb-2"></i>
                {% if ca.business_reg_file %}
                  <p class="text-xs text-emerald-600 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-3 h-3 mr-1"></i>
                    Uploaded
                  </p>
                {% else %}
                  <p class="text-xs text-gray-500">Not uploaded</p>
                {% endif %}
              </div>
            </div>
            <div class="file-preview hidden" id="business_reg_file_preview">
              <div class="preview-content mb-3"></div>
              <p class="text-xs text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-3 h-3 mr-1"></i>
                Preview
              </p>
            </div>
            {{ form.business_reg_file(class_="w-full text-xs file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-purple-100 file:text-purple-700 hover:file:bg-purple-200 transition duration-200") }}
          </div>
          {% for error in form.business_reg_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- Bank Details -->
        <div class="space-y-3">
          {{ form.bank_details_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-gray-400 transition-colors duration-200 bg-rose-50/30" id="bank_details_file_container">
            <div class="upload-area" id="bank_details_file_upload_area">
              <div class="mb-3">
                <i data-feather="dollar-sign" class="w-8 h-8 text-rose-600 mx-auto mb-2"></i>
                {% if ca.bank_details_file %}
                  <p class="text-xs text-emerald-600 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-3 h-3 mr-1"></i>
                    Uploaded
                  </p>
                {% else %}
                  <p class="text-xs text-gray-500">Not uploaded</p>
                {% endif %}
              </div>
            </div>
            <div class="file-preview hidden" id="bank_details_file_preview">
              <div class="preview-content mb-3"></div>
              <p class="text-xs text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-3 h-3 mr-1"></i>
                Preview
              </p>
            </div>
            {{ form.bank_details_file(class_="w-full text-xs file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-rose-100 file:text-rose-700 hover:file:bg-rose-200 transition duration-200") }}
          </div>
          {% for error in form.bank_details_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- Office Address Proof -->
        <div class="space-y-3">
          {{ form.office_address_proof_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-gray-400 transition-colors duration-200 bg-teal-50/30" id="office_address_proof_file_container">
            <div class="upload-area" id="office_address_proof_file_upload_area">
              <div class="mb-3">
                <i data-feather="home" class="w-8 h-8 text-teal-600 mx-auto mb-2"></i>
                {% if ca.office_address_proof_file %}
                  <p class="text-xs text-emerald-600 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-3 h-3 mr-1"></i>
                    Uploaded
                  </p>
                {% else %}
                  <p class="text-xs text-gray-500">Not uploaded</p>
                {% endif %}
              </div>
            </div>
            <div class="file-preview hidden" id="office_address_proof_file_preview">
              <div class="preview-content mb-3"></div>
              <p class="text-xs text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-3 h-3 mr-1"></i>
                Preview
              </p>
            </div>
            {{ form.office_address_proof_file(class_="w-full text-xs file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-teal-100 file:text-teal-700 hover:file:bg-teal-200 transition duration-200") }}
          </div>
          {% for error in form.office_address_proof_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>

        <!-- Self Declaration -->
        <div class="space-y-3">
          {{ form.self_declaration_file.label(class_="flex items-center text-gray-700 font-medium text-sm") }}
          <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-gray-400 transition-colors duration-200 bg-orange-50/30" id="self_declaration_file_container">
            <div class="upload-area" id="self_declaration_file_upload_area">
              <div class="mb-3">
                <i data-feather="file-text" class="w-8 h-8 text-orange-600 mx-auto mb-2"></i>
                {% if ca.self_declaration_file %}
                  <p class="text-xs text-emerald-600 flex items-center justify-center">
                    <i data-feather="check-circle" class="w-3 h-3 mr-1"></i>
                    Uploaded
                  </p>
                {% else %}
                  <p class="text-xs text-gray-500">Not uploaded</p>
                {% endif %}
              </div>
            </div>
            <div class="file-preview hidden" id="self_declaration_file_preview">
              <div class="preview-content mb-3"></div>
              <p class="text-xs text-blue-600 flex items-center justify-center">
                <i data-feather="eye" class="w-3 h-3 mr-1"></i>
                Preview
              </p>
            </div>
            {{ form.self_declaration_file(class_="w-full text-xs file:py-1 file:px-2 file:rounded file:border-0 file:text-xs file:bg-orange-100 file:text-orange-700 hover:file:bg-orange-200 transition duration-200") }}
          </div>
          {% for error in form.self_declaration_file.errors %}<p class="text-red-500 text-xs flex items-center"><i data-feather="alert-circle" class="w-3 h-3 mr-1"></i>{{ error }}</p>{% endfor %}
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="bg-white rounded-2xl shadow-lg p-6 border border-slate-200">
      <div class="flex flex-col sm:flex-row gap-4 justify-end">
        <a href="?edit=0" 
           class="inline-flex items-center justify-center px-6 py-3 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 hover:shadow-md transition-all duration-200 text-sm font-medium">
          <i data-feather="x" class="w-4 h-4 mr-2"></i>
          Cancel
        </a>
        <button type="submit" 
                class="inline-flex items-center justify-center px-8 py-3 bg-orange-200 text-orange-600 rounded-lg shadow-lg hover:shadow-xl hover:text-orange-700 hover:bg-orange-200 transform hover:-translate-y-0.5 transition-all duration-300 text-sm font-medium">
          <i data-feather="save" class="w-4 h-4 mr-2"></i>
          Save Changes
        </button>
      </div>
    </div>
  </form>
</div>
{% endif %}

<script>
  // Initialize Feather icons
  feather.replace();
  
  // Add smooth scrolling for form sections
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize feather icons after DOM is loaded
    feather.replace();
    
    // Add comprehensive file upload preview functionality
    const fileInputs = document.querySelectorAll('input[type="file"]');
    fileInputs.forEach(input => {
      input.addEventListener('change', function(e) {
        const file = e.target.files[0];
        const inputName = e.target.name;
        
        if (file) {
          // Get the container and preview elements
          const container = document.getElementById(inputName + '_container');
          const uploadArea = document.getElementById(inputName + '_upload_area');
          const previewArea = document.getElementById(inputName + '_preview');
          const previewContent = previewArea.querySelector('.preview-content');
          
          if (container && uploadArea && previewArea && previewContent) {
            // Hide upload area and show preview
            uploadArea.classList.add('hidden');
            previewArea.classList.remove('hidden');
            
            // Update container styling
            container.classList.add('border-green-400', 'bg-green-50');
            container.classList.remove('border-gray-300');
            
            // Clear previous preview content
            previewContent.innerHTML = '';
            
            const fileType = file.type;
            const fileName = file.name;
            const fileSize = (file.size / 1024 / 1024).toFixed(2); // Convert to MB
            
            // Create preview based on file type
            if (fileType.startsWith('image/')) {
              // Image preview
              const reader = new FileReader();
              reader.onload = function(e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.className = 'max-w-full max-h-32 mx-auto object-contain rounded shadow-md';
                img.alt = 'File Preview';
                previewContent.appendChild(img);
                
                // Add file info
                const fileInfo = document.createElement('div');
                fileInfo.className = 'text-xs text-gray-600 mt-2';
                fileInfo.innerHTML = `<strong>${fileName}</strong><br>Size: ${fileSize} MB`;
                previewContent.appendChild(fileInfo);
              };
              reader.readAsDataURL(file);
            } else if (fileType === 'application/pdf') {
              // PDF preview
              const reader = new FileReader();
              reader.onload = function(e) {
                // Create PDF icon and info
                const pdfIcon = document.createElement('div');
                pdfIcon.className = 'flex flex-col items-center';
                pdfIcon.innerHTML = `
                  <div class="bg-red-100 p-4 rounded-lg mb-2">
                    <i data-feather="file-text" class="w-12 h-12 text-red-600"></i>
                  </div>
                  <div class="text-xs text-gray-600 text-center">
                    <strong>PDF Document</strong><br>
                    ${fileName}<br>
                    Size: ${fileSize} MB
                  </div>
                `;
                previewContent.appendChild(pdfIcon);
                feather.replace(); // Re-initialize icons
                
                // Try to show PDF preview using PDF.js if available, otherwise show icon
                if (window.pdfjsLib) {
                  try {
                    const typedarray = new Uint8Array(e.target.result);
                    pdfjsLib.getDocument(typedarray).promise.then(function(pdf) {
                      // Get first page
                      pdf.getPage(1).then(function(page) {
                        const scale = 0.5;
                        const viewport = page.getViewport({scale: scale});
                        
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;
                        canvas.className = 'mx-auto border rounded shadow-md mb-2';
                        
                        const renderContext = {
                          canvasContext: context,
                          viewport: viewport
                        };
                        
                        page.render(renderContext).promise.then(() => {
                          // Replace PDF icon with canvas preview
                          pdfIcon.innerHTML = '';
                          pdfIcon.appendChild(canvas);
                          const fileInfo = document.createElement('div');
                          fileInfo.className = 'text-xs text-gray-600 mt-2 text-center';
                          fileInfo.innerHTML = `<strong>PDF Preview (Page 1)</strong><br>${fileName}<br>Size: ${fileSize} MB`;
                          pdfIcon.appendChild(fileInfo);
                        });
                      });
                    });
                  } catch (error) {
                    console.log('PDF.js not available, showing icon preview');
                  }
                }
              };
              reader.readAsArrayBuffer(file);
            } else {
              // Generic file preview
              const genericIcon = document.createElement('div');
              genericIcon.className = 'flex flex-col items-center';
              
              let iconName = 'file';
              let iconColor = 'gray';
              let bgColor = 'gray';
              
              // Determine icon based on file extension
              const extension = fileName.split('.').pop().toLowerCase();
              switch (extension) {
                case 'doc':
                case 'docx':
                  iconName = 'file-text';
                  iconColor = 'blue';
                  bgColor = 'blue';
                  break;
                case 'xls':
                case 'xlsx':
                  iconName = 'grid';
                  iconColor = 'green';
                  bgColor = 'green';
                  break;
                case 'txt':
                  iconName = 'file-text';
                  iconColor = 'gray';
                  bgColor = 'gray';
                  break;
                default:
                  iconName = 'file';
                  iconColor = 'purple';
                  bgColor = 'purple';
              }
              
              genericIcon.innerHTML = `
                <div class="bg-${bgColor}-100 p-4 rounded-lg mb-2">
                  <i data-feather="${iconName}" class="w-12 h-12 text-${iconColor}-600"></i>
                </div>
                <div class="text-xs text-gray-600 text-center">
                  <strong>${fileName}</strong><br>
                  Size: ${fileSize} MB<br>
                  Type: ${fileType || 'Unknown'}
                </div>
              `;
              previewContent.appendChild(genericIcon);
              feather.replace(); // Re-initialize icons
            }
            
            // Add remove file option
            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.className = 'mt-3 px-3 py-1 bg-red-100 text-red-600 rounded text-xs hover:bg-red-200 transition-colors';
            removeBtn.innerHTML = '<i data-feather="x" class="w-3 h-3 mr-1"></i>';
            removeBtn.onclick = function() {
              // Reset file input
              e.target.value = '';
              // Show upload area, hide preview
              uploadArea.classList.remove('hidden');
              previewArea.classList.add('hidden');
              // Reset container styling
              container.classList.remove('border-green-400', 'bg-green-50');
              container.classList.add('border-gray-300');
            };
            previewContent.appendChild(removeBtn);
            feather.replace(); // Re-initialize icons
          }
        }
      });
    });

    // Add form validation feedback
    const form = document.querySelector('form');
    if (form) {
      form.addEventListener('submit', function(e) {
        // Add loading state to submit button
        const submitBtn = form.querySelector('button[type="submit"]');
        if (submitBtn) {
          submitBtn.disabled = true;
          submitBtn.innerHTML = '<i data-feather="loader" class="w-4 h-4 mr-2 animate-spin"></i>Saving...';
          feather.replace();
        }
      });
    }

    // Add hover effects to info cards
    const infoCards = document.querySelectorAll('.info-card');
    infoCards.forEach(card => {
      card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateX(8px)';
      });
      
      card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateX(5px)';
      });
    });

    // Load document previews for profile view
    const documentPreviews = [
      { linkId: 'aadhaar_preview_link', containerId: 'aadhaar_preview_container' },
      { linkId: 'pan_file_preview_link', containerId: 'pan_file_preview_container' },
      { linkId: 'icai_certificate_file_preview_link', containerId: 'icai_certificate_file_preview_container' },
      { linkId: 'cop_certificate_file_preview_link', containerId: 'cop_certificate_file_preview_container' },
      { linkId: 'business_reg_file_preview_link', containerId: 'business_reg_file_preview_container' },
      { linkId: 'bank_details_file_preview_link', containerId: 'bank_details_file_preview_container' }
    ];

    documentPreviews.forEach(doc => {
      const link = document.getElementById(doc.linkId);
      const container = document.getElementById(doc.containerId);
      
      if (link && container) {
        const fileUrl = link.href;
        const fileName = fileUrl.split('/').pop();
        const fileExtension = fileName.split('.').pop().toLowerCase();
        
        // Create preview based on file type
        if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(fileExtension)) {
          // Image preview
          const img = document.createElement('img');
          img.src = fileUrl;
          img.className = 'w-full h-32 object-cover rounded-lg border-2 border-gray-300 group-hover:border-current transition-colors';
          img.alt = 'Document Preview';
          img.onload = function() {
            container.innerHTML = '';
            container.appendChild(img);
          };
          img.onerror = function() {
            container.innerHTML = `
              <div class="w-full h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center">
                <div class="text-center">
                  <i data-feather="image" class="w-8 h-8 text-gray-400 mx-auto mb-1"></i>
                  <p class="text-xs text-gray-500">Image preview unavailable</p>
                </div>
              </div>
            `;
            feather.replace();
          };
        } else if (fileExtension === 'pdf') {
          // PDF preview
          if (window.pdfjsLib) {
            pdfjsLib.getDocument(fileUrl).promise.then(function(pdf) {
              pdf.getPage(1).then(function(page) {
                const scale = 0.8;
                const viewport = page.getViewport({scale: scale});
                
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                canvas.className = 'w-full h-32 object-cover rounded-lg border-2 border-gray-300 group-hover:border-current transition-colors';
                
                const renderContext = {
                  canvasContext: context,
                  viewport: viewport
                };
                
                page.render(renderContext).promise.then(() => {
                  container.innerHTML = '';
                  container.appendChild(canvas);
                });
              });
            }).catch(function(error) {
              // Fallback for PDF preview error
              container.innerHTML = `
                <div class="w-full h-32 bg-red-50 rounded-lg border-2 border-dashed border-red-200 flex items-center justify-center">
                  <div class="text-center">
                    <i data-feather="file-text" class="w-8 h-8 text-red-400 mx-auto mb-1"></i>
                    <p class="text-xs text-red-500">PDF Document</p>
                    <p class="text-xs text-gray-500">${fileName}</p>
                  </div>
                </div>
              `;
              feather.replace();
            });
          } else {
            // PDF.js not available - show PDF icon
            container.innerHTML = `
              <div class="w-full h-32 bg-red-50 rounded-lg border-2 border-dashed border-red-200 flex items-center justify-center">
                <div class="text-center">
                  <i data-feather="file-text" class="w-8 h-8 text-red-400 mx-auto mb-1"></i>
                  <p class="text-xs text-red-500">PDF Document</p>
                  <p class="text-xs text-gray-500">${fileName}</p>
                </div>
              </div>
            `;
            feather.replace();
          }
        } else {
          // Generic file preview
          let iconName = 'file';
          let iconColor = 'gray-400';
          let bgColor = 'gray-50';
          let borderColor = 'gray-200';
          
          // Determine icon and colors based on file extension
          switch (fileExtension) {
            case 'doc':
            case 'docx':
              iconName = 'file-text';
              iconColor = 'blue-400';
              bgColor = 'blue-50';
              borderColor = 'blue-200';
              break;
            case 'xls':
            case 'xlsx':
              iconName = 'grid';
              iconColor = 'green-400';
              bgColor = 'green-50';
              borderColor = 'green-200';
              break;
            case 'txt':
              iconName = 'file-text';
              iconColor = 'gray-400';
              bgColor = 'gray-50';
              borderColor = 'gray-200';
              break;
            default:
              iconName = 'file';
              iconColor = 'purple-400';
              bgColor = 'purple-50';
              borderColor = 'purple-200';
          }
          
          container.innerHTML = `
            <div class="w-full h-32 bg-${bgColor} rounded-lg border-2 border-dashed border-${borderColor} flex items-center justify-center">
              <div class="text-center">
                <i data-feather="${iconName}" class="w-8 h-8 text-${iconColor} mx-auto mb-1"></i>
                <p class="text-xs text-gray-600">${fileExtension.toUpperCase()} File</p>
                <p class="text-xs text-gray-500">${fileName}</p>
              </div>
            </div>
          `;
          feather.replace();
        }
      }
    });
  });
</script>

{% endblock %} 